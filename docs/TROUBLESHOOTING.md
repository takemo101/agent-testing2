# トラブルシューティング

Pomodoro Timer CLI（`pomodoro`）の使用中に問題が発生した場合の解決策をまとめています。

## よくある問題と解決策

### 1. 通知が表示されない
- **macOSの通知設定を確認してください**:
  - 「システム設定 > 通知 > pomodoro」が有効になっているか確認してください。
- **集中モード（フォーカスモード）を確認してください**:
  - macOSの集中モードがオンになっている場合、通知が制限されている可能性があります。集中モードの設定で `pomodoro` を「許可されたアプリ」に追加するか、通知の概要をオフにしてください。
- **通知の権限をリセットする**:
  - 一度アンインストールして再インストールするか、macOSを再起動することで解決する場合があります。

### 2. メニューバーにアイコンが表示されない
- **別のインスタンスが実行されていないか確認してください**:
  - メニューバーアイコンは1つのみ表示されます。
- **メニューバーの空きスペースを確認してください**:
  - アイコンが多すぎる場合、macOSによって非表示にされることがあります。不要なアイコンを減らすか、表示優先度を調整してください。

### 3. LaunchAgent（自動起動）が機能しない
- **インストール状態を確認してください**:
  ```bash
  pomodoro status
  ```
- **launchctlで状態を確認してください**:
  ```bash
  launchctl list | grep pomodoro
  ```
- **plistファイルを確認してください**:
  - `~/Library/LaunchAgents/com.pomodoro.daemon.plist` が存在するか確認してください。

### 4. フォーカスモード連携が動作しない
- **ショートカット名を確認してください**:
  - 「Enable Work Focus」と「Disable Work Focus」という名前のショートカットが「ショートカット」アプリに存在することを確認してください。
- **オートメーションの権限を確認してください**:
  - 「システム設定 > プライバシーとセキュリティ > オートメーション」で、使用しているターミナルにショートカットの制御権限が与えられているか確認してください。

### 5. サウンドが鳴らない
- **システムの音量を確認してください**:
  - macOSのシステム音量がミュートになっていないか確認してください。
- **`--no-sound` フラグを確認してください**:
  - タイマー開始時に `--no-sound` フラグを付けていないか確認してください。

## ログの確認方法

詳細な調査が必要な場合は、ログファイルを確認してください。

### ログファイルの場所
- 標準出力ログ: `~/.pomodoro/logs/stdout.log`
- 標準エラーログ: `~/.pomodoro/logs/stderr.log`

### ログのリアルタイム確認
```bash
tail -f ~/.pomodoro/logs/stdout.log
```

## デバッグモードでの実行

問題を詳細に追跡するために、`--verbose`（または `-v`）フラグを付けてコマンドを実行してください。

```bash
pomodoro -v start
```

## 問題の報告

解決しない場合は、[GitHub Issues](https://github.com/takemo101/agent-testing2/issues) に以下の情報を添えて報告してください。

- 使用しているmacOSのバージョン
- 実行したコマンドと出力内容
- 関連するログファイルの内容
- 再現手順
